<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Women-Centered Drug Safety — Interactive Dashboard</title>
  <link rel="stylesheet" href="dashboard-styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <style>
    /* Dashboard entrance animations */
    @keyframes slideInFromLeft {
      0% {
        transform: translateX(-100%) scale(0.8);
        opacity: 0;
      }
      100% {
        transform: translateX(0) scale(1);
        opacity: 1;
      }
    }
    
    @keyframes slideInFromRight {
      0% {
        transform: translateX(100%) scale(0.8);
        opacity: 0;
      }
      100% {
        transform: translateX(0) scale(1);
        opacity: 1;
      }
    }
    
    @keyframes slideInFromTop {
      0% {
        transform: translateY(-50px) scale(0.9);
        opacity: 0;
      }
      100% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }
    
    @keyframes slideInFromBottom {
      0% {
        transform: translateY(50px) scale(0.9);
        opacity: 0;
      }
      100% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }
    
    @keyframes fadeInScale {
      0% {
        transform: scale(0.7);
        opacity: 0;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }
    
    /* Initial state - elements hidden */
    .header {
      opacity: 0;
      animation: slideInFromTop 0.8s ease-out 0.2s forwards;
    }
    
    .panel.controls {
      opacity: 0;
      animation: slideInFromLeft 0.8s ease-out 0.6s forwards;
    }
    
    .panel.analysis {
      opacity: 0;
      animation: slideInFromRight 0.8s ease-out 1s forwards;
    }
    
    .chart-card {
      opacity: 0;
      animation: fadeInScale 0.8s ease-out 1.4s forwards;
    }
    
    .legend {
      opacity: 0;
      animation: slideInFromBottom 0.6s ease-out 1.8s forwards;
    }
    
    .info-box {
      opacity: 0;
      animation: slideInFromBottom 0.6s ease-out forwards;
    }
    
    .info-box:nth-child(4) {
      animation-delay: 2.2s;
    }
    
    .info-box:nth-child(5) {
      animation-delay: 2.4s;
    }
    
    .info-box:nth-child(6) {
      animation-delay: 2.6s;
    }
    
    /* Stagger field animations */
    .field {
      opacity: 0;
      animation: slideInFromLeft 0.5s ease-out forwards;
    }
    
    .field:nth-child(2) { animation-delay: 1.0s; }
    .field:nth-child(3) { animation-delay: 1.1s; }
    .field:nth-child(4) { animation-delay: 1.2s; }
    .field:nth-child(5) { animation-delay: 1.3s; }
    .field:nth-child(6) { animation-delay: 1.4s; }
    .field:nth-child(7) { animation-delay: 1.5s; }
  </style>
</head>
<body>
  <div class="app">
    <!-- Header -->
    <div class="header">
      <div class="brand">
        <div class="logo">W</div>
        <div>
          <div class="title">Women-Centered Drug Safety AI</div>
          <div class="subtitle">Personalized medicine through female-focused analysis</div>
        </div>
      </div>
      <div class="subtitle">8M+ clinical reports analyzed for women's health optimization</div>
    </div>

    <!-- Controls Panel -->
    <div class="panel controls">
      <div class="section-title"><h3>Patient Parameters</h3></div>
      <div class="field">
        <label class="muted">Biological Sex</label>
        <div class="seg" style="margin-top:8px">
          <button id="sex-m" class="active">Male</button>
          <button id="sex-f">Female</button>
        </div>
      </div>
      <div class="field">
        <label class="muted">Age (years)</label>
        <select id="age">
          <option>18</option><option>25</option><option selected>35</option><option>45</option><option>60</option>
        </select>
      </div>
      <div class="field">
        <label class="muted">Medication</label>
        <select id="medication">
          <option value="sertraline">Sertraline (SSRI)</option>
          <option value="amlodipine">Amlodipine (BP)</option>
          <option value="metformin">Metformin (Diabetes)</option>
        </select>
      </div>
      <div class="field">
        <label class="muted">Dosage</label>
        <div class="slider-wrap">
          <input id="dose" type="range" min="1" max="200" value="50">
          <div class="slider-value"><span id="dose-value">50 mg</span></div>
        </div>
      </div>
      <div class="field muted" style="font-size:13px">
        Demo only. Replace computeRiskCurve(...) with a backend call later.
      </div>
    </div>

    <!-- Analysis Panel -->
    <div class="panel analysis">
      <div style="display:flex;align-items:center;justify-content:space-between">
        <h3 style="margin:0">Risk Analysis</h3>
        <div class="muted">Adverse Event Risk (% over time)</div>
      </div>
      <div class="chart-card" style="margin-top:12px">
        <canvas id="riskChart"></canvas>
      </div>
      <div class="legend">
        <div class="item"><div class="dot female"></div>Female</div>
        <div class="item"><div class="dot male"></div>Male</div>
      </div>
      <div id="risk-diff" class="info-box warning">
        <strong>Risk Difference:</strong> <span id="risk-diff-val">—</span>
      </div>
      <div id="recommend-box" class="info-box recommend">
        <strong>Personalized Dosing</strong>
        <div id="recommend-text"></div>
      </div>
      <div class="info-box">
        <strong>Metabolic Insight</strong>
        <div id="metab-text" class="muted"></div>
      </div>
    </div>
  </div>
  <script src="dashboard-script.js"></script>
  
  <script>
    // Enhanced dashboard entrance animations
    document.addEventListener('DOMContentLoaded', function() {
      // Add ripple effect to interactive elements after they animate in
      setTimeout(() => {
        const buttons = document.querySelectorAll('button, select, input[type="range"]');
        buttons.forEach(button => {
          button.addEventListener('click', function(e) {
            createRipple(e, this);
          });
        });
      }, 2000);
      
      // Animate chart bars after chart loads
      setTimeout(() => {
        const canvas = document.getElementById('riskChart');
        if (canvas) {
          canvas.style.transform = 'scale(1.05)';
          canvas.style.transition = 'transform 0.3s ease';
          setTimeout(() => {
            canvas.style.transform = 'scale(1)';
          }, 300);
        }
      }, 1600);
    });
    
    function createRipple(event, element) {
      const rect = element.getBoundingClientRect();
      const size = Math.max(rect.width, rect.height);
      const x = event.clientX - rect.left - size / 2;
      const y = event.clientY - rect.top - size / 2;
      
      const ripple = document.createElement('div');
      ripple.style.cssText = `
        position: absolute;
        width: ${size}px;
        height: ${size}px;
        left: ${x}px;
        top: ${y}px;
        background: radial-gradient(circle, rgba(255,156,201,0.6) 0%, transparent 70%);
        border-radius: 50%;
        transform: scale(0);
        animation: ripple 0.6s ease-out;
        pointer-events: none;
        z-index: 1000;
      `;
      
      element.style.position = 'relative';
      element.appendChild(ripple);
      
      setTimeout(() => {
        if (ripple.parentNode) ripple.parentNode.removeChild(ripple);
      }, 600);
    }
    
    // Add ripple animation keyframes
    const style = document.createElement('style');
    style.textContent = `
      @keyframes ripple {
        to {
          transform: scale(2);
          opacity: 0;
        }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>
